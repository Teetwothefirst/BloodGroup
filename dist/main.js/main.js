/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();const e=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==c)throw new i;const l=s<<2|o>>4;if(r.push(l),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==c){const t=a<<6&192|c;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r=function(t){return function(t){const i=e(t);return n.encodeByteArray(i,!0)}(t).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return n.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function c(){try{return"object"==typeof indexedDB}catch(t){return!1}}function l(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class u extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(d,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new u(i,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(p(n)&&p(s)){if(!f(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function p(t){return null!==t&&"object"==typeof t}const g=1e3,m=2,y=144e5,v=.5;function w(t,e=g,n=m){const i=e*Math.pow(n,t),r=Math.round(v*i*(Math.random()-.5)*2);return Math.min(y,i+r)}function b(t){return t&&t._delegate?t._delegate:t}class E{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const I="[DEFAULT]";class T{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:I})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=I){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=I){return this.instances.has(t)}getOptions(t=I){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===I?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=I){return this.component?this.component.multipleInstances?t:I:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new T(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const S=[];var C,A;(A=C||(C={}))[A.DEBUG=0]="DEBUG",A[A.VERBOSE=1]="VERBOSE",A[A.INFO=2]="INFO",A[A.WARN=3]="WARN",A[A.ERROR=4]="ERROR",A[A.SILENT=5]="SILENT";const D={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},N=C.INFO,k={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},O=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=k[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class R{constructor(t){this.name=t,this._logLevel=N,this._logHandler=O,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in C))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?D[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...t),this._logHandler(this,C.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...t),this._logHandler(this,C.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,C.INFO,...t),this._logHandler(this,C.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,C.WARN,...t),this._logHandler(this,C.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...t),this._logHandler(this,C.ERROR,...t)}}const L=(t,e)=>e.some((e=>t instanceof e));let x,M;const P=new WeakMap,F=new WeakMap,V=new WeakMap,U=new WeakMap,B=new WeakMap;let j={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return F.get(t);if("objectStoreNames"===e)return t.objectStoreNames||V.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return z(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function $(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(M||(M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(q(this),t),z(P.get(this))}:function(...t){return z(e.apply(q(this),t))}:function(t,...n){const i=e.call(q(this),t,...n);return V.set(i,t.sort?t.sort():[t]),z(i)}:(t instanceof IDBTransaction&&function(t){if(F.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));F.set(t,e)}(t),L(t,x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,j):t);var e}function z(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(z(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&P.set(e,t)})).catch((()=>{})),B.set(e,t),e}(t);if(U.has(t))return U.get(t);const e=$(t);return e!==t&&(U.set(t,e),B.set(e,t)),e}const q=t=>B.get(t),H=["get","getKey","getAll","getAllKeys","count"],G=["put","add","delete","clear"],K=new Map;function Q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(K.get(e))return K.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=G.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!H.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return K.set(e,s),s}var W;W=j,j={...W,get:(t,e,n)=>Q(t,e)||W.get(t,e,n),has:(t,e)=>!!Q(t,e)||W.has(t,e)};class X{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Y="@firebase/app",J="0.9.25",Z=new R("@firebase/app"),tt="[DEFAULT]",et={[Y]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nt=new Map,it=new Map;function rt(t,e){try{t.container.addComponent(e)}catch(n){Z.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function st(t){const e=t.name;if(it.has(e))return Z.debug(`There were multiple attempts to register component ${e}.`),!1;it.set(e,t);for(const e of nt.values())rt(e,t);return!0}function ot(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const at=new h("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ct{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new E("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}function lt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:tt,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw at.create("bad-app-name",{appName:String(r)});if(n||(n=o()),!n)throw at.create("no-options");const s=nt.get(r);if(s){if(f(n,s.options)&&f(i,s.config))return s;throw at.create("duplicate-app",{appName:r})}const a=new _(r);for(const t of it.values())a.addComponent(t);const c=new ct(n,i,a);return nt.set(r,c),c}function ut(t=tt){const e=nt.get(t);if(!e&&t===tt&&o())return lt();if(!e)throw at.create("no-app",{appName:t});return e}function ht(t,e,n){var i;let r=null!==(i=et[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Z.warn(t.join(" "))}st(new E(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const dt="firebase-heartbeat-database",ft=1,pt="firebase-heartbeat-store";let gt=null;function mt(){return gt||(gt=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=z(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(z(o.result),t.oldVersion,t.newVersion,z(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(dt,ft,{upgrade:(t,e)=>{0===e&&t.createObjectStore(pt)}}).catch((t=>{throw at.create("idb-open",{originalErrorMessage:t.message})}))),gt}async function yt(t,e){try{const n=(await mt()).transaction(pt,"readwrite"),i=n.objectStore(pt);await i.put(e,vt(t)),await n.done}catch(t){if(t instanceof u)Z.warn(t.message);else{const e=at.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Z.warn(e.message)}}}function vt(t){return`${t.name}!${t.options.appId}`}class wt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Et(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=bt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),It(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),It(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),s=r(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function bt(){return(new Date).toISOString().substring(0,10)}class Et{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!c()&&l().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await mt();return await e.transaction(pt).objectStore(pt).get(vt(t))}catch(t){if(t instanceof u)Z.warn(t.message);else{const e=at.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Z.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return yt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function It(t){return r(JSON.stringify({version:2,heartbeats:t})).length}st(new E("platform-logger",(t=>new X(t)),"PRIVATE")),st(new E("heartbeat",(t=>new wt(t)),"PRIVATE")),ht(Y,J,""),ht(Y,J,"esm2017"),ht("fire-js",""),ht("firebase","10.7.1","app");const Tt=(t,e)=>e.some((e=>t instanceof e));let _t,St;const Ct=new WeakMap,At=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,kt=new WeakMap;let Ot={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return At.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Dt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Rt(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(St||(St=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(xt(this),t),Lt(Ct.get(this))}:function(...t){return Lt(e.apply(xt(this),t))}:function(t,...n){const i=e.call(xt(this),t,...n);return Dt.set(i,t.sort?t.sort():[t]),Lt(i)}:(t instanceof IDBTransaction&&function(t){if(At.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));At.set(t,e)}(t),Tt(t,_t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Ot):t);var e}function Lt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Lt(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Ct.set(e,t)})).catch((()=>{})),kt.set(e,t),e}(t);if(Nt.has(t))return Nt.get(t);const e=Rt(t);return e!==t&&(Nt.set(t,e),kt.set(e,t)),e}const xt=t=>kt.get(t),Mt=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Ft=new Map;function Vt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ft.get(e))return Ft.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Pt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Mt.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Ft.set(e,s),s}Ot=(t=>({...t,get:(e,n,i)=>Vt(e,n)||t.get(e,n,i),has:(e,n)=>!!Vt(e,n)||t.has(e,n)}))(Ot);const Ut="@firebase/installations",Bt="0.6.4",jt=1e4,$t=`w:${Bt}`,zt="FIS_v2",qt="https://firebaseinstallations.googleapis.com/v1",Ht=36e5,Gt=new h("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Kt(t){return t instanceof u&&t.code.includes("request-failed")}function Qt({projectId:t}){return`${qt}/projects/${t}/installations`}function Wt(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Xt(t,e){const n=(await e.json()).error;return Gt.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Yt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Jt(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Zt(t){return new Promise((e=>{setTimeout(e,t)}))}const te=/^[cdef][\w-]{21}$/,ee="";function ne(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return te.test(e)?e:ee}catch(t){return ee}}function ie(t){return`${t.appName}!${t.appId}`}const re=new Map;function se(t,e){const n=ie(t);oe(n,e),function(t,e){const n=(!ae&&"BroadcastChannel"in self&&(ae=new BroadcastChannel("[Firebase] FID Change"),ae.onmessage=t=>{oe(t.data.key,t.data.fid)}),ae);n&&n.postMessage({key:t,fid:e}),0===re.size&&ae&&(ae.close(),ae=null)}(n,e)}function oe(t,e){const n=re.get(t);if(n)for(const t of n)t(e)}let ae=null;const ce="firebase-installations-database",le=1,ue="firebase-installations-store";let he=null;function de(){return he||(he=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Lt(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Lt(o.result),t.oldVersion,t.newVersion,Lt(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}(ce,le,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ue)}})),he}async function fe(t,e){const n=ie(t),i=(await de()).transaction(ue,"readwrite"),r=i.objectStore(ue),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||se(t,e.fid),e}async function pe(t){const e=ie(t),n=(await de()).transaction(ue,"readwrite");await n.objectStore(ue).delete(e),await n.done}async function ge(t,e){const n=ie(t),i=(await de()).transaction(ue,"readwrite"),r=i.objectStore(ue),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||se(t,o.fid),o}async function me(t){let e;const n=await ge(t.appConfig,(n=>{const i=function(t){return we(t||{fid:ne(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Gt.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Qt(t),r=Yt(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:zt,appId:t.appId,sdkVersion:$t},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await Jt((()=>fetch(i,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Wt(t.authToken)}}throw await Xt("Create Installation",c)}(t,e);return fe(t.appConfig,n)}catch(n){throw Kt(n)&&409===n.customData.serverCode?await pe(t.appConfig):await fe(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ye(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return n.fid===ee?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function ye(t){let e=await ve(t.appConfig);for(;1===e.registrationStatus;)await Zt(100),e=await ve(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await me(t);return n||e}return e}function ve(t){return ge(t,(t=>{if(!t)throw Gt.create("installation-not-found");return we(t)}))}function we(t){return 1===(e=t).registrationStatus&&e.registrationTime+jt<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function be({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${Qt(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=Yt(t);return n.append("Authorization",function(t){return`${zt} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:$t,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await Jt((()=>fetch(i,a)));if(c.ok)return Wt(await c.json());throw await Xt("Generate Auth Token",c)}async function Ee(t,e=!1){let n;const i=await ge(t.appConfig,(i=>{if(!Te(i))throw Gt.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ht}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await Ie(t.appConfig);for(;1===n.authToken.requestStatus;)await Zt(100),n=await Ie(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Ee(t,e):i}(t,e),i;{if(!navigator.onLine)throw Gt.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await be(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await fe(t.appConfig,i),n}catch(n){if(!Kt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await fe(t.appConfig,n)}else await pe(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function Ie(t){return ge(t,(t=>{if(!Te(t))throw Gt.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+jt<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function Te(t){return void 0!==t&&2===t.registrationStatus}function _e(t){return Gt.create("missing-app-config-values",{valueName:t})}const Se="installations";st(new E(Se,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw _e("App Configuration");if(!t.name)throw _e("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _e(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:ot(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),st(new E("installations-internal",(t=>{const e=ot(t.getProvider("app").getImmediate(),Se).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await me(e);return i?i.catch(console.error):Ee(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await me(t);e&&await e}(n),(await Ee(n,e)).token}(e,t)}}),"PRIVATE")),ht(Ut,Bt),ht(Ut,Bt,"esm2017");const Ce="analytics",Ae="firebase_id",De="origin",Ne=6e4,ke="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oe="https://www.googletagmanager.com/gtag/js",Re=new R("@firebase/analytics"),Le=new h("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function xe(t){if(!t.startsWith(Oe)){const e=Le.create("invalid-gtag-resource",{gtagURL:t});return Re.warn(e.message),""}return t}function Me(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const Pe=30,Fe=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Ve(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Ue(t,e=Fe,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Le.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Le.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new je;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Ne),Be({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Be(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Fe){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(Le.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(a)return Re.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:Ve(i)},s=ke.replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw Le.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(e){const c=e;if(!function(t){if(!(t instanceof u&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(r.deleteThrottleMetadata(o),a)return Re.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw e}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?w(n,r.intervalMillis,Pe):w(n,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,h),Re.debug(`Calling attemptFetch again in ${l} millis`),Be(t,h,i,r)}}class je{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let $e,ze;async function qe(t,e,n,i,r,s,o){var a;const u=Ue(t);u.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Re.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Re.error(t))),e.push(u);const h=async function(){if(!c())return Re.warn(Le.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await l()}catch(t){return Re.warn(Le.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[d,f]=await Promise.all([u,h]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Oe)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:xe}),i=document.createElement("script"),r=`${Oe}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,d.measurementId),ze&&(r("consent","default",ze),ze=void 0),r("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p[De]="firebase",p.update=!0,null!=f&&(p[Ae]=f),r("config",d.measurementId,p),$e&&(r("set",$e),$e=void 0),d.measurementId}class He{constructor(t){this.app=t}_delete(){return delete Ge[this.app.options.appId],Promise.resolve()}}let Ge={},Ke=[];const Qe={};let We,Xe,Ye="dataLayer",Je=!1;function Ze(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Le.create("invalid-analytics-context",{errorInfo:e});Re.warn(n.message)}}();const i=t.options.appId;if(!i)throw Le.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Le.create("no-api-key");Re.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ge[i])throw Le.create("already-exists",{id:i});if(!Je){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Ye);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(t,e,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await Me(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(t){Re.error(t)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await Me(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){Re.error(t)}t("config",r,s)}(t,e,n,i,r,o)}else if("consent"===r){const[e]=s;t("consent","update",e)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(t){Re.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(Ge,Ke,Qe,Ye,"gtag");Xe=t,We=e,Je=!0}return Ge[i]=qe(t,Ke,Qe,e,We,Ye,n),new He(t)}const tn="@firebase/analytics",en="0.10.0";st(new E(Ce,((t,{options:e})=>Ze(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),st(new E("analytics-internal",(function(t){try{const e=t.getProvider(Ce).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=b(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Xe,Ge[t.app.options.appId],e,n,i).catch((t=>Re.error(t)))}(e,t,n,i)}}catch(t){throw Le.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),ht(tn,en),ht(tn,en,"esm2017");var nn,rn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sn={},on=on||{},an=rn||self;function cn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ln(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var un="closure_uid_"+(1e9*Math.random()>>>0),hn=0;function dn(t,e,n){return t.call.apply(t.bind,arguments)}function fn(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pn(t,e,n){return(pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dn:fn).apply(null,arguments)}function gn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function mn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function yn(){this.s=this.s,this.o=this.o}yn.prototype.s=!1,yn.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,un)&&t[un]||(t[un]=++hn))},yn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wn(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function bn(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(cn(n)){const e=t.length||0,i=n.length||0;t.length=e+i;for(let r=0;r<i;r++)t[e+r]=n[r]}else t.push(n)}}function En(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}En.prototype.h=function(){this.defaultPrevented=!0};var In=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};an.addEventListener("test",t,e),an.removeEventListener("test",t,e)}catch(t){}return t}();function Tn(t){return/^[\s\xa0]*$/.test(t)}function _n(){var t=an.navigator;return t&&(t=t.userAgent)?t:""}function Sn(t){return-1!=_n().indexOf(t)}function Cn(t){return Cn[" "](t),t}Cn[" "]=function(){};var An,Dn,Nn,kn=Sn("Opera"),On=Sn("Trident")||Sn("MSIE"),Rn=Sn("Edge"),Ln=Rn||On,xn=Sn("Gecko")&&!(-1!=_n().toLowerCase().indexOf("webkit")&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),Mn=-1!=_n().toLowerCase().indexOf("webkit")&&!Sn("Edge");function Pn(){var t=an.document;return t?t.documentMode:void 0}t:{var Fn="",Vn=(Dn=_n(),xn?/rv:([^\);]+)(\)|;)/.exec(Dn):Rn?/Edge\/([\d\.]+)/.exec(Dn):On?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Dn):Mn?/WebKit\/(\S+)/.exec(Dn):kn?/(?:Version)[ \/]?(\S+)/.exec(Dn):void 0);if(Vn&&(Fn=Vn?Vn[1]:""),On){var Un=Pn();if(null!=Un&&Un>parseFloat(Fn)){An=String(Un);break t}}An=Fn}an.document&&On?Nn=Pn()||parseInt(An,10)||void 0:Nn=void 0;var Bn=Nn;function jn(t,e){if(En.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xn){t:{try{Cn(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$n[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&jn.$.h.call(this)}}mn(jn,En);var $n={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var zn="closure_listenable_"+(1e6*Math.random()|0),qn=0;function Hn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++qn,this.fa=this.ia=!1}function Gn(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Kn(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Qn(t){const e={};for(const n in t)e[n]=t[n];return e}const Wn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xn(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Wn.length;e++)n=Wn[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Yn(t){this.src=t,this.g={},this.h=0}function Jn(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=vn(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Gn(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Zn(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}Yn.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Zn(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Hn(e,this.src,s,!!i,r)).ia=n,t.push(e)),e};var ti="closure_lm_"+(1e6*Math.random()|0),ei={};function ni(t,e,n,i,r){if(i&&i.once)return ri(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ni(t,e[s],n,i,r);return null}return n=hi(n),t&&t[zn]?t.O(e,n,ln(i)?!!i.capture:!!i,r):ii(t,e,n,!1,i,r)}function ii(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=ln(r)?!!r.capture:!!r,a=li(t);if(a||(t[ti]=a=new Yn(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){const t=ci;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)In||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(ai(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function ri(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ri(t,e[s],n,i,r);return null}return n=hi(n),t&&t[zn]?t.P(e,n,ln(i)?!!i.capture:!!i,r):ii(t,e,n,!0,i,r)}function si(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)si(t,e[s],n,i,r);else i=ln(i)?!!i.capture:!!i,n=hi(n),t&&t[zn]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Zn(s=t.g[e],n,i,r))&&(Gn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=li(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zn(e,n,i,r)),(n=-1<t?e[t]:null)&&oi(n))}function oi(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[zn])Jn(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(ai(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=li(e))?(Jn(n,t),0==n.h&&(n.src=null,e[ti]=null)):Gn(t)}}}function ai(t){return t in ei?ei[t]:ei[t]="on"+t}function ci(t,e){if(t.fa)t=!0;else{e=new jn(e,this);var n=t.listener,i=t.la||t.src;t.ia&&oi(t),t=n.call(i,e)}return t}function li(t){return(t=t[ti])instanceof Yn?t:null}var ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function hi(t){return"function"==typeof t?t:(t[ui]||(t[ui]=function(e){return t.handleEvent(e)}),t[ui])}function di(){yn.call(this),this.i=new Yn(this),this.S=this,this.J=null}function fi(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"==typeof e)e=new En(e,t);else if(e instanceof En)e.target=e.target||t;else{var r=e;Xn(e=new En(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=pi(o,i,!0,e)&&r}if(r=pi(o=e.g=t,i,!0,e)&&r,r=pi(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=pi(o=e.g=n[s],i,!1,e)&&r}function pi(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Jn(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}mn(di,yn),di.prototype[zn]=!0,di.prototype.removeEventListener=function(t,e,n,i){si(this,t,e,n,i)},di.prototype.N=function(){if(di.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Gn(n[i]);delete e.g[t],e.h--}}this.J=null},di.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},di.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var gi=an.JSON.stringify;function mi(){var t=Ti;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yi=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new vi),(t=>t.reset()));class vi{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function wi(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function bi(t){an.setTimeout((()=>{throw t}),0)}let Ei,Ii=!1,Ti=new class{constructor(){this.h=this.g=null}add(t,e){const n=yi.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},_i=()=>{const t=an.Promise.resolve(void 0);Ei=()=>{t.then(Si)}};var Si=()=>{for(var t;t=mi();){try{t.h.call(t.g)}catch(t){bi(t)}var e=yi;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ii=!1};function Ci(t,e){di.call(this),this.h=t||1,this.g=e||an,this.j=pn(this.qb,this),this.l=Date.now()}function Ai(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Di(t,e,n){if("function"==typeof t)n&&(t=pn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pn(t.handleEvent,t)}return 2147483647<Number(e)?-1:an.setTimeout(t,e||0)}function Ni(t){t.g=Di((()=>{t.g=null,t.i&&(t.i=!1,Ni(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}mn(Ci,di),(nn=Ci.prototype).ga=!1,nn.T=null,nn.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fi(this,"tick"),this.ga&&(Ai(this),this.start()))}},nn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nn.N=function(){Ci.$.N.call(this),Ai(this),delete this.g};class ki extends yn{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(t){yn.call(this),this.h=t,this.g={}}mn(Oi,yn);var Ri=[];function Li(t,e,n,i){Array.isArray(n)||(n&&(Ri[0]=n.toString()),n=Ri);for(var r=0;r<n.length;r++){var s=ni(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function xi(t){Kn(t.g,(function(t,e){this.g.hasOwnProperty(e)&&oi(t)}),t),t.g={}}function Mi(){this.g=!0}function Pi(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return gi(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}Oi.prototype.N=function(){Oi.$.N.call(this),xi(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mi.prototype.Ea=function(){this.g=!1},Mi.prototype.info=function(){};var Fi={},Vi=null;function Ui(){return Vi=Vi||new di}function Bi(t){En.call(this,Fi.Ta,t)}function ji(t){const e=Ui();fi(e,new Bi(e))}function $i(t,e){En.call(this,Fi.STAT_EVENT,t),this.stat=e}function zi(t){const e=Ui();fi(e,new $i(e,t))}function qi(t,e){En.call(this,Fi.Ua,t),this.size=e}function Hi(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return an.setTimeout((function(){t()}),e)}Fi.Ta="serverreachability",mn(Bi,En),Fi.STAT_EVENT="statevent",mn($i,En),Fi.Ua="timingevent",mn(qi,En);var Gi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ki={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qi(){}function Wi(t){return t.h||(t.h=t.i())}function Xi(){}Qi.prototype.h=null;var Yi,Ji={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zi(){En.call(this,"d")}function tr(){En.call(this,"c")}function er(){}function nr(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Oi(this),this.P=rr,t=Ln?125:void 0,this.V=new Ci(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}mn(Zi,En),mn(tr,En),mn(er,Qi),er.prototype.g=function(){return new XMLHttpRequest},er.prototype.i=function(){return{}},Yi=new er;var rr=45e3,sr={},or={};function ar(t,e,n){t.L=1,t.A=Cr(Er(e)),t.u=n,t.S=!0,cr(t,null)}function cr(t,e){t.G=Date.now(),dr(t),t.B=Er(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),Ur(n.i,"t",i),t.o=0,n=t.l.J,t.h=new ir,t.g=Us(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ki(pn(t.Pa,t,t.g),t.O)),Li(t.U,t.g,"readystatechange",t.nb),e=t.I?Qn(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ji(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function lr(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function ur(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=hr(t,n),i==or){4==e&&(t.s=4,zi(14),r=!1),Pi(t.j,t.m,null,"[Incomplete Response]");break}if(i==sr){t.s=4,zi(15),Pi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Pi(t.j,t.m,i,null),yr(t,i)}lr(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,zi(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Os(e),e.M=!0,zi(11))):(Pi(t.j,t.m,n,"[Invalid Chunked Response]"),mr(t),gr(t))}function hr(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?or:(n=Number(e.substring(n,i)),isNaN(n)?sr:(i+=1)+n>e.length?or:(e=e.slice(i,i+n),t.o=i+n,e))}function dr(t){t.Y=Date.now()+t.P,fr(t,t.P)}function fr(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Hi(pn(t.lb,t),e)}function pr(t){t.C&&(an.clearTimeout(t.C),t.C=null)}function gr(t){0==t.l.H||t.J||xs(t.l,t)}function mr(t){pr(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Ai(t.V),xi(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yr(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Gr(n.i,t)))if(!t.K&&Gr(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Ls(n),Ts(n)}ks(n),zi(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hi(pn(n.ib,n),6e3));if(1>=Hr(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Ps(n,11)}else if((t.K||n.g==t)&&Ls(n),!Tn(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const e=l[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Kr(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Sr(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((i=n).wa=Vs(i,i.J?i.pa:null,i.Y),o.K){Qr(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(pr(a),dr(a)),i.g=o}else Ns(i);0<n.j.length&&Ss(n)}else"stop"!=l[0]&&"close"!=l[0]||Ps(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ps(n,7):Is(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ji()}catch(t){}}function vr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(cn(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(cn(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(cn(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}(nn=nr.prototype).setTimeout=function(t){this.P=t},nn.nb=function(t){t=t.target;const e=this.M;e&&3==ms(t)?e.l():this.Pa(t)},nn.Pa=function(t){try{if(t==this.g)t:{const u=ms(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||Ln||this.g&&(this.h.h||this.g.ja()||ys(this.g)))){this.J||4!=u||7==e||ji(),pr(this);var n=this.g.da();this.ca=n;e:if(lr(this)){var i=ys(this.g);t="";var r=i.length,s=4==ms(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){mr(this),gr(this);var o="";break e}this.h.i=new an.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tn(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.s=3,zi(12),mr(this),gr(this);break t}Pi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yr(this,n)}this.S?(ur(this,u,o),Ln&&this.i&&3==u&&(Li(this.U,this.V,"tick",this.mb),this.V.start())):(Pi(this.j,this.m,o,null),yr(this,o)),4==u&&mr(this),this.i&&!this.J&&(4==u?xs(this.l,this):(this.i=!1,dr(this)))}else(function(t){const e={};t=(t.g&&2<=ms(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(Tn(t[i]))continue;var n=wi(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,zi(12)):(this.s=0,zi(13)),mr(this),gr(this)}}}catch(t){}},nn.mb=function(){if(this.g){var t=ms(this.g),e=this.g.ja();this.o<e.length&&(pr(this),ur(this,t,e),this.i&&4!=t&&dr(this))}},nn.cancel=function(){this.J=!0,mr(this)},nn.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(ji(),zi(17)),mr(this),this.s=2,gr(this)):fr(this,this.Y-t)};var wr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function br(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof br){this.h=t.h,Ir(this,t.j),this.s=t.s,this.g=t.g,Tr(this,t.m),this.l=t.l;var e=t.i,n=new Mr;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_r(this,n),this.o=t.o}else t&&(e=String(t).match(wr))?(this.h=!1,Ir(this,e[1]||"",!0),this.s=Ar(e[2]||""),this.g=Ar(e[3]||"",!0),Tr(this,e[4]),this.l=Ar(e[5]||"",!0),_r(this,e[6]||"",!0),this.o=Ar(e[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}function Er(t){return new br(t)}function Ir(t,e,n){t.j=n?Ar(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _r(t,e,n){e instanceof Mr?(t.i=e,function(t,e){e&&!t.j&&(Pr(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Fr(this,e),Ur(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Dr(e,Lr)),t.i=new Mr(e,t.h))}function Sr(t,e,n){t.i.set(e,n)}function Cr(t){return Sr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Nr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Nr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}br.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Dr(e,kr,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Dr(e,kr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dr(n,"/"==n.charAt(0)?Rr:Or,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Dr(n,xr)),t.join("")};var kr=/[#\/\?@]/g,Or=/[#\?:]/g,Rr=/[#\?]/g,Lr=/[#\?@]/g,xr=/#/g;function Mr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pr(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Fr(t,e){Pr(t),e=Br(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Vr(t,e){return Pr(t),e=Br(t,e),t.g.has(e)}function Ur(t,e,n){Fr(t,e),0<n.length&&(t.i=null,t.g.set(Br(t,e),wn(n)),t.h+=n.length)}function Br(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(nn=Mr.prototype).add=function(t,e){Pr(this),this.i=null,t=Br(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},nn.forEach=function(t,e){Pr(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},nn.ta=function(){Pr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},nn.Z=function(t){Pr(this);let e=[];if("string"==typeof t)Vr(this,t)&&(e=e.concat(this.g.get(Br(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},nn.set=function(t,e){return Pr(this),this.i=null,Vr(this,t=Br(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},nn.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},nn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var jr=class{constructor(t,e){this.g=t,this.map=e}};function $r(t){this.l=t||zr,t=an.PerformanceNavigationTiming?0<(t=an.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(an.g&&an.g.Ka&&an.g.Ka()&&an.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zr=10;function qr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Hr(t){return t.h?1:t.g?t.g.size:0}function Gr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Kr(t,e){t.g?t.g.add(e):t.h=e}function Qr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Wr(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return wn(t.i)}$r.prototype.cancel=function(){if(this.i=Wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Xr=class{stringify(t){return an.JSON.stringify(t,void 0)}parse(t){return an.JSON.parse(t,void 0)}};function Yr(){this.g=new Xr}function Jr(t,e,n){const i=n||"";try{vr(t,(function(t,n){let r=t;ln(t)&&(r=gi(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Zr(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function ts(t){this.l=t.ec||null,this.j=t.ob||!1}function es(t,e){di.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ns,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mn(ts,Qi),ts.prototype.g=function(){return new es(this.l,this.j)},ts.prototype.i=function(t){return function(){return t}}({}),mn(es,di);var ns=0;function is(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function rs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ss(t)}function ss(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(nn=es.prototype).open=function(t,e){if(this.readyState!=ns)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ss(this)},nn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||an).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rs(this)),this.readyState=ns},nn.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==an.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;is(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},nn.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?rs(this):ss(this),3==this.readyState&&is(this)}},nn.Za=function(t){this.g&&(this.response=this.responseText=t,rs(this))},nn.Ya=function(t){this.g&&(this.response=t,rs(this))},nn.ka=function(){this.g&&rs(this)},nn.setRequestHeader=function(t,e){this.v.append(t,e)},nn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},nn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(es.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var os=an.JSON.parse;function as(t){di.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cs,this.L=this.M=!1}mn(as,di);var cs="",ls=/^https?$/i,us=["POST","PUT"];function hs(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ds(t),ps(t)}function ds(t){t.F||(t.F=!0,fi(t,"complete"),fi(t,"error"))}function fs(t){if(t.h&&void 0!==on&&(!t.C[1]||4!=ms(t)||2!=t.da()))if(t.v&&4==ms(t))Di(t.La,0,t);else if(fi(t,"readystatechange"),4==ms(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===o){var r=String(t.I).match(wr)[1]||null;!r&&an.self&&an.self.location&&(r=an.self.location.protocol.slice(0,-1)),i=!ls.test(r?r.toLowerCase():"")}n=i}if(n)fi(t,"complete"),fi(t,"success");else{t.m=6;try{var s=2<ms(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",ds(t)}}finally{ps(t)}}}function ps(t,e){if(t.g){gs(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||fi(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function gs(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(an.clearTimeout(t.A),t.A=null)}function ms(t){return t.g?t.g.readyState:0}function ys(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case cs:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function vs(t){let e="";return Kn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function ws(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=vs(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sr(t,e,n))}function bs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Es(t){this.Ga=0,this.j=[],this.l=new Mi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bs("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bs("baseRetryDelayMs",5e3,t),this.hb=bs("retryDelaySeedMs",1e4,t),this.eb=bs("forwardChannelMaxRetries",2,t),this.xa=bs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $r(t&&t.concurrentRequestLimit),this.Ja=new Yr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Is(t){if(_s(t),3==t.H){var e=t.W++,n=Er(t.I);if(Sr(n,"SID",t.K),Sr(n,"RID",e),Sr(n,"TYPE","terminate"),As(t,n),(e=new nr(t,t.l,e)).L=2,e.A=Cr(Er(n)),n=!1,an.navigator&&an.navigator.sendBeacon)try{n=an.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&an.Image&&((new Image).src=e.A,n=!0),n||(e.g=Us(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dr(e)}Fs(t)}function Ts(t){t.g&&(Os(t),t.g.cancel(),t.g=null)}function _s(t){Ts(t),t.u&&(an.clearTimeout(t.u),t.u=null),Ls(t),t.i.cancel(),t.m&&("number"==typeof t.m&&an.clearTimeout(t.m),t.m=null)}function Ss(t){if(!qr(t.i)&&!t.m){t.m=!0;var e=t.Na;Ei||_i(),Ii||(Ei(),Ii=!0),Ti.add(e,t),t.C=0}}function Cs(t,e){var n;n=e?e.m:t.W++;const i=Er(t.I);Sr(i,"SID",t.K),Sr(i,"RID",n),Sr(i,"AID",t.V),As(t,i),t.o&&t.s&&ws(i,t.o,t.s),n=new nr(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Ds(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Kr(t.i,n),ar(n,i,e)}function As(t,e){t.na&&Kn(t.na,(function(t,n){Sr(e,n,t)})),t.h&&vr({},(function(t,n){Sr(e,n,t)}))}function Ds(t,e,n){n=Math.min(t.j.length,n);var i=t.h?pn(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{Jr(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function Ns(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ei||_i(),Ii||(Ei(),Ii=!0),Ti.add(e,t),t.A=0}}function ks(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Hi(pn(t.Ma,t),Ms(t,t.A)),t.A++,0))}function Os(t){null!=t.B&&(an.clearTimeout(t.B),t.B=null)}function Rs(t){t.g=new nr(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Er(t.wa);Sr(e,"RID","rpc"),Sr(e,"SID",t.K),Sr(e,"AID",t.V),Sr(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Sr(e,"TO",t.qa),Sr(e,"TYPE","xmlhttp"),As(t,e),t.o&&t.s&&ws(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Cr(Er(e)),n.u=null,n.S=!0,cr(n,t)}function Ls(t){null!=t.v&&(an.clearTimeout(t.v),t.v=null)}function xs(t,e){var n=null;if(t.g==e){Ls(t),Os(t),t.g=null;var i=2}else{if(!Gr(t.i,e))return;n=e.F,Qr(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;fi(i=Ui(),new qi(i,n)),Ss(t)}else Ns(t);else if(3==(r=e.s)||0==r&&0<e.ca||!(1==i&&function(t,e){return!(Hr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Hi(pn(t.Na,t,e),Ms(t,t.C)),t.C++,0)))}(t,e)||2==i&&ks(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ps(t,5);break;case 4:Ps(t,10);break;case 3:Ps(t,6);break;default:Ps(t,2)}}function Ms(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ps(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=pn(t.pb,t);n||(n=new br("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||Ir(n,"https"),Cr(n)),function(t,e){const n=new Mi;if(an.Image){const i=new Image;i.onload=gn(Zr,n,i,"TestLoadImage: loaded",!0,e),i.onerror=gn(Zr,n,i,"TestLoadImage: error",!1,e),i.onabort=gn(Zr,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=gn(Zr,n,i,"TestLoadImage: timeout",!1,e),an.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else zi(2);t.H=0,t.h&&t.h.za(e),Fs(t),_s(t)}function Fs(t){if(t.H=0,t.ma=[],t.h){const e=Wr(t.i);0==e.length&&0==t.j.length||(bn(t.ma,e),bn(t.ma,t.j),t.i.i.length=0,wn(t.j),t.j.length=0),t.h.ya()}}function Vs(t,e,n){var i=n instanceof br?Er(n):new br(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Tr(i,i.m);else{var r=an.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new br(null);i&&Ir(s,i),e&&(s.g=e),r&&Tr(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Sr(i,n,e),Sr(i,"VER",t.ra),As(t,i),i}function Us(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new as(new ts({ob:n})):new as(t.va)).Oa(t.J),e}function Bs(){}function js(){if(On&&!(10<=Number(Bn)))throw Error("Environmental error: no available transport.")}function $s(t,e){di.call(this),this.g=new Es(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Tn(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tn(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Hs(this)}function zs(t){Zi.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function qs(){tr.call(this),this.status=1}function Hs(t){this.g=t}function Gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ks(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function Qs(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}(nn=as.prototype).Oa=function(t){this.M=t},nn.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Yi.g(),this.C=this.u?Wi(this.u):Wi(Yi),this.g.onreadystatechange=pn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void hs(this,t)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=an.FormData&&t instanceof an.FormData,!(0<=vn(us,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gs(this),0<this.B&&((this.L=function(t){return On&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pn(this.ua,this)):this.A=Di(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){hs(this,t)}},nn.ua=function(){void 0!==on&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},nn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fi(this,"complete"),fi(this,"abort"),ps(this))},nn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ps(this,!0)),as.$.N.call(this)},nn.La=function(){this.s||(this.G||this.v||this.l?fs(this):this.kb())},nn.kb=function(){fs(this)},nn.isActive=function(){return!!this.g},nn.da=function(){try{return 2<ms(this)?this.g.status:-1}catch(t){return-1}},nn.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},nn.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),os(e)}},nn.Ia=function(){return this.m},nn.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nn=Es.prototype).ra=8,nn.H=1,nn.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new nr(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Qn(s),Xn(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Ds(this,r,e),Sr(n=Er(this.I),"RID",t),Sr(n,"CVER",22),this.F&&Sr(n,"X-HTTP-Session-Id",this.F),As(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(vs(s)))+"&"+e:this.o&&ws(n,this.o,s)),Kr(this.i,r),this.bb&&Sr(n,"TYPE","init"),this.P?(Sr(n,"$req",e),Sr(n,"SID","null"),r.aa=!0,ar(r,n,null)):ar(r,n,e),this.H=2}}else 3==this.H&&(t?Cs(this,t):0==this.j.length||qr(this.i)||Cs(this))},nn.Ma=function(){if(this.u=null,Rs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Hi(pn(this.jb,this),t)}},nn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zi(10),Ts(this),Rs(this))},nn.ib=function(){null!=this.v&&(this.v=null,Ts(this),ks(this),zi(19))},nn.pb=function(t){t?(this.l.info("Successfully pinged google.com"),zi(2)):(this.l.info("Failed to ping google.com"),zi(1))},nn.isActive=function(){return!!this.h&&this.h.isActive(this)},(nn=Bs.prototype).Ba=function(){},nn.Aa=function(){},nn.za=function(){},nn.ya=function(){},nn.isActive=function(){return!0},nn.Va=function(){},js.prototype.g=function(t,e){return new $s(t,e)},mn($s,di),$s.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;zi(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Vs(t,null,t.Y),Ss(t)},$s.prototype.close=function(){Is(this.g)},$s.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=gi(t),t=n);e.j.push(new jr(e.fb++,t)),3==e.H&&Ss(e)},$s.prototype.N=function(){this.g.h=null,delete this.j,Is(this.g),delete this.g,$s.$.N.call(this)},mn(zs,Zi),mn(qs,tr),mn(Hs,Bs),Hs.prototype.Ba=function(){fi(this.g,"a")},Hs.prototype.Aa=function(t){fi(this.g,new zs(t))},Hs.prototype.za=function(t){fi(this.g,new qs)},Hs.prototype.ya=function(){fi(this.g,"b")},mn(Gs,(function(){this.blockSize=-1})),Gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Gs.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)Ks(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Ks(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Ks(this,i),r=0;break}}this.h=r,this.i+=e},Gs.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Ws={};function Xs(t){return-128<=t&&128>t?function(t,e){var n=Ws;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new Qs([0|t],0>t?-1:0)}(t)}(t):new Qs([0|t],0>t?-1:0)}function Ys(t){if(isNaN(t)||!isFinite(t))return Zs;if(0>t)return ro(Ys(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Js;return new Qs(e,0)}var Js=4294967296,Zs=Xs(0),to=Xs(1),eo=Xs(16777216);function no(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function io(t){return-1==t.h}function ro(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Qs(n,~t.h).add(to)}function so(t,e){return t.add(ro(e))}function oo(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ao(t,e){this.g=t,this.h=e}function co(t,e){if(no(e))throw Error("division by zero");if(no(t))return new ao(Zs,Zs);if(io(t))return e=co(ro(t),e),new ao(ro(e.g),ro(e.h));if(io(e))return e=co(t,ro(e)),new ao(ro(e.g),e.h);if(30<t.g.length){if(io(t)||io(e))throw Error("slowDivide_ only works with positive integers.");for(var n=to,i=e;0>=i.X(t);)n=lo(n),i=lo(i);var r=uo(n,1),s=uo(i,1);for(i=uo(i,2),n=uo(n,2);!no(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=uo(i,1),n=uo(n,1)}return e=so(t,r.R(e)),new ao(r,e)}for(r=Zs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=Ys(n)).R(e);io(o)||0<o.X(t);)o=(s=Ys(n-=i)).R(e);no(s)&&(s=to),r=r.add(s),t=so(t,o)}return new ao(r,t)}function lo(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Qs(n,t.h)}function uo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Qs(r,t.h)}(nn=Qs.prototype).ea=function(){if(io(this))return-ro(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Js+i)*e,e*=Js}return t},nn.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(no(this))return"0";if(io(this))return"-"+ro(this).toString(t);for(var e=Ys(Math.pow(t,6)),n=this,i="";;){var r=co(n,e).g,s=((0<(n=so(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(no(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},nn.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},nn.X=function(t){return io(t=so(this,t))?-1:no(t)?0:1},nn.abs=function(){return io(this)?ro(this):this},nn.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Qs(n,-2147483648&n[n.length-1]?-1:0)},nn.R=function(t){if(no(this)||no(t))return Zs;if(io(this))return io(t)?ro(this).R(ro(t)):ro(ro(this).R(t));if(io(t))return ro(this.R(ro(t)));if(0>this.X(eo)&&0>t.X(eo))return Ys(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,oo(n,2*i+2*r),n[2*i+2*r+1]+=s*c,oo(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,oo(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,oo(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Qs(n,0)},nn.gb=function(t){return co(this,t).h},nn.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Qs(n,this.h&t.h)},nn.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Qs(n,this.h|t.h)},nn.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Qs(n,this.h^t.h)},js.prototype.createWebChannel=js.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,Ki.COMPLETE="complete",Xi.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",di.prototype.listen=di.prototype.O,as.prototype.listenOnce=as.prototype.P,as.prototype.getLastError=as.prototype.Sa,as.prototype.getLastErrorCode=as.prototype.Ia,as.prototype.getStatus=as.prototype.da,as.prototype.getResponseJson=as.prototype.Wa,as.prototype.getResponseText=as.prototype.ja,as.prototype.send=as.prototype.ha,as.prototype.setWithCredentials=as.prototype.Oa,Gs.prototype.digest=Gs.prototype.l,Gs.prototype.reset=Gs.prototype.reset,Gs.prototype.update=Gs.prototype.j,Qs.prototype.add=Qs.prototype.add,Qs.prototype.multiply=Qs.prototype.R,Qs.prototype.modulo=Qs.prototype.gb,Qs.prototype.compare=Qs.prototype.X,Qs.prototype.toNumber=Qs.prototype.ea,Qs.prototype.toString=Qs.prototype.toString,Qs.prototype.getBits=Qs.prototype.D,Qs.fromNumber=Ys,Qs.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return ro(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Ys(Math.pow(n,8)),r=Zs,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Ys(Math.pow(n,o)),r=r.R(o).add(Ys(a))):r=(r=r.R(i)).add(Ys(a))}return r};var ho=sn.createWebChannelTransport=function(){return new js},fo=sn.getStatEventTarget=function(){return Ui()},po=sn.ErrorCode=Gi,go=sn.EventType=Ki,mo=sn.Event=Fi,yo=sn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vo=(sn.FetchXmlHttpFactory=ts,sn.WebChannel=Xi),wo=sn.XhrIo=as,bo=(sn.Md5=Gs,sn.Integer=Qs);const Eo="@firebase/firestore";class Io{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Io.UNAUTHENTICATED=new Io(null),Io.GOOGLE_CREDENTIALS=new Io("google-credentials-uid"),Io.FIRST_PARTY=new Io("first-party-uid"),Io.MOCK_USER=new Io("mock-user");let To="10.7.0";const _o=new R("@firebase/firestore");function So(){return _o.logLevel}function Co(t,...e){if(_o.logLevel<=C.DEBUG){const n=e.map(No);_o.debug(`Firestore (${To}): ${t}`,...n)}}function Ao(t,...e){if(_o.logLevel<=C.ERROR){const n=e.map(No);_o.error(`Firestore (${To}): ${t}`,...n)}}function Do(t,...e){if(_o.logLevel<=C.WARN){const n=e.map(No);_o.warn(`Firestore (${To}): ${t}`,...n)}}function No(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function ko(t="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+t;throw Ao(e),new Error(e)}function Oo(t,e){t||ko()}function Ro(t,e){return t}const Lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xo extends u{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mo{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Po{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Fo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Io.UNAUTHENTICATED)))}shutdown(){}}class Vo{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Uo{constructor(t){this.t=t,this.currentUser=Io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Mo;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Mo,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Co("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Co("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Mo)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Co("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Oo("string"==typeof e.accessToken),new Po(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Oo(null===t||"string"==typeof t),new Io(t)}}class Bo{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Io.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jo{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Bo(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Io.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $o{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zo{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Co("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Co("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Co("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Co("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Oo("string"==typeof t.token),this.R=t.token,new $o(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qo(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class Ho{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=qo(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Go(t,e){return t<e?-1:t>e?1:0}function Ko(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Qo{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qo.fromMillis(Date.now())}static fromDate(t){return Qo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Qo(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Go(this.nanoseconds,t.nanoseconds):Go(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wo{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Wo(t)}static min(){return new Wo(new Qo(0,0))}static max(){return new Wo(new Qo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xo{constructor(t,e,n){void 0===e?e=0:e>t.length&&ko(),void 0===n?n=t.length-e:n>t.length-e&&ko(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Xo.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xo?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Yo extends Xo{construct(t,e,n){return new Yo(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new xo(Lo.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Yo(e)}static emptyPath(){return new Yo([])}}const Jo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zo extends Xo{construct(t,e,n){return new Zo(t,e,n)}static isValidIdentifier(t){return Jo.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zo.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zo(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new xo(Lo.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new xo(Lo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new xo(Lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new xo(Lo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Zo(e)}static emptyPath(){return new Zo([])}}class ta{constructor(t){this.path=t}static fromPath(t){return new ta(Yo.fromString(t))}static fromName(t){return new ta(Yo.fromString(t).popFirst(5))}static empty(){return new ta(Yo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Yo.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Yo.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ta(new Yo(t.slice()))}}function ea(t){return new na(t.readTime,t.key,-1)}class na{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new na(Wo.min(),ta.empty(),-1)}static max(){return new na(Wo.max(),ta.empty(),-1)}}function ia(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ta.comparator(t.documentKey,e.documentKey),0!==n?n:Go(t.largestBatchId,e.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function oa(t){if(t.code!==Lo.FAILED_PRECONDITION||t.message!==ra)throw t;Co("LocalStore","Unexpectedly lost primary lease")}class aa{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ko(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new aa(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof aa?e:aa.resolve(e)}catch(t){return aa.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):aa.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):aa.reject(e)}static resolve(t){return new aa(((e,n)=>{e(t)}))}static reject(t){return new aa(((e,n)=>{n(t)}))}static waitFor(t){return new aa(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=aa.resolve(!1);for(const n of t)e=e.next((t=>t?aa.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new aa(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new aa(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function ca(t){return"IndexedDbTransactionError"===t.name}class la{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function ua(t){return null==t}function ha(t){return 0===t&&1/t==-1/0}la._e=-1;function da(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pa(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ga{constructor(t,e){this.comparator=t,this.root=e||ya.EMPTY}insert(t,e){return new ga(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ya.BLACK,null,null))}remove(t){return new ga(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ya.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ma(this.root,t,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ma(this.root,t,this.comparator,!0)}}class ma{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ya{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:ya.RED,this.left=null!=i?i:ya.EMPTY,this.right=null!=r?r:ya.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new ya(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ya.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ya.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ya.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ya.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ko();if(this.right.isRed())throw ko();const t=this.left.check();if(t!==this.right.check())throw ko();return t+(this.isRed()?0:1)}}ya.EMPTY=null,ya.RED=!0,ya.BLACK=!1,ya.EMPTY=new class{constructor(){this.size=0}get key(){throw ko()}get value(){throw ko()}get color(){throw ko()}get left(){throw ko()}get right(){throw ko()}copy(t,e,n,i,r){return this}insert(t,e,n){return new ya(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class va{constructor(t){this.comparator=t,this.data=new ga(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new wa(this.data.getIterator())}getIteratorFrom(t){return new wa(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof va))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new va(this.comparator);return e.data=t,e}}class wa{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ba{constructor(t){this.fields=t,t.sort(Zo.comparator)}static empty(){return new ba([])}unionWith(t){let e=new va(Zo.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new ba(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ko(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Ea extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ia{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ea("Invalid base64 string: "+t):t}}(t);return new Ia(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ia(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Go(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ia.EMPTY_BYTE_STRING=new Ia("");const Ta=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(t){if(Oo(!!t),"string"==typeof t){let e=0;const n=Ta.exec(t);if(Oo(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Sa(t.seconds),nanos:Sa(t.nanos)}}function Sa(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ca(t){return"string"==typeof t?Ia.fromBase64String(t):Ia.fromUint8Array(t)}function Aa(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Da(t){const e=t.mapValue.fields.__previous_value__;return Aa(e)?Da(e):e}function Na(t){const e=_a(t.mapValue.fields.__local_write_time__.timestampValue);return new Qo(e.seconds,e.nanos)}class ka{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Oa{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Oa&&t.projectId===this.projectId&&t.database===this.database}}const Ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function La(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Aa(t)?4:qa(t)?9007199254740991:10:ko()}function xa(t,e){if(t===e)return!0;const n=La(t);if(n!==La(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=_a(t.timestampValue),i=_a(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ca(t.bytesValue).isEqual(Ca(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Sa(t.geoPointValue.latitude)===Sa(e.geoPointValue.latitude)&&Sa(t.geoPointValue.longitude)===Sa(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Sa(t.integerValue)===Sa(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Sa(t.doubleValue),i=Sa(e.doubleValue);return n===i?ha(n)===ha(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Ko(t.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(da(n)!==da(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!xa(n[t],i[t])))return!1;return!0}(t,e);default:return ko()}}function Ma(t,e){return void 0!==(t.values||[]).find((t=>xa(t,e)))}function Pa(t,e){if(t===e)return 0;const n=La(t),i=La(e);if(n!==i)return Go(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Go(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Sa(t.integerValue||t.doubleValue),i=Sa(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Fa(t.timestampValue,e.timestampValue);case 4:return Fa(Na(t),Na(e));case 5:return Go(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ca(t),i=Ca(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Go(n[t],i[t]);if(0!==e)return e}return Go(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Go(Sa(t.latitude),Sa(e.latitude));return 0!==n?n:Go(Sa(t.longitude),Sa(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Pa(n[t],i[t]);if(e)return e}return Go(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ra.mapValue&&e===Ra.mapValue)return 0;if(t===Ra.mapValue)return 1;if(e===Ra.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=Go(i[t],s[t]);if(0!==e)return e;const o=Pa(n[i[t]],r[s[t]]);if(0!==o)return o}return Go(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ko()}}function Fa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Go(t,e);const n=_a(t),i=_a(e),r=Go(n.seconds,i.seconds);return 0!==r?r:Go(n.nanos,i.nanos)}function Va(t){return Ua(t)}function Ua(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=_a(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Ca(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return ta.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Ua(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Ua(t.fields[r])}`;return n+"}"}(t.mapValue):ko()}function Ba(t){return!!t&&"integerValue"in t}function ja(t){return!!t&&"arrayValue"in t}function $a(t){return!!t&&"mapValue"in t}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fa(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=za(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qa(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ha{constructor(t){this.value=t}static empty(){return new Ha({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!$a(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=za(e)}setAll(t){let e=Zo.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=za(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());$a(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return xa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];$a(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){fa(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Ha(za(this.value))}}function Ga(t){const e=[];return fa(t.fields,((t,n)=>{const i=new Zo([t]);if($a(n)){const t=Ga(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new ba(e)}class Ka{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Ka(t,0,Wo.min(),Wo.min(),Wo.min(),Ha.empty(),0)}static newFoundDocument(t,e,n,i){return new Ka(t,1,e,Wo.min(),n,i,0)}static newNoDocument(t,e){return new Ka(t,2,e,Wo.min(),Wo.min(),Ha.empty(),0)}static newUnknownDocument(t,e){return new Ka(t,3,e,Wo.min(),Wo.min(),Ha.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Wo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ha.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ha.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wo.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ka&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ka(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qa{constructor(t,e){this.position=t,this.inclusive=e}}function Wa(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?ta.comparator(ta.fromName(o.referenceValue),n.key):Pa(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Xa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xa(t.position[n],e.position[n]))return!1;return!0}class Ya{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ja(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Za{}class tc extends Za{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new ac(t,e,n):"array-contains"===e?new hc(t,n):"in"===e?new dc(t,n):"not-in"===e?new fc(t,n):"array-contains-any"===e?new pc(t,n):new tc(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new cc(t,n):new lc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Pa(e,this.value)):null!==e&&La(this.value)===La(e)&&this.matchesComparison(Pa(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ko()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ec extends Za{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new ec(t,e)}matches(t){return nc(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nc(t){return"and"===t.op}function ic(t){return function(t){for(const e of t.filters)if(e instanceof ec)return!1;return!0}(t)&&nc(t)}function rc(t){if(t instanceof tc)return t.field.canonicalString()+t.op.toString()+Va(t.value);if(ic(t))return t.filters.map((t=>rc(t))).join(",");{const e=t.filters.map((t=>rc(t))).join(",");return`${t.op}(${e})`}}function sc(t,e){return t instanceof tc?function(t,e){return e instanceof tc&&t.op===e.op&&t.field.isEqual(e.field)&&xa(t.value,e.value)}(t,e):t instanceof ec?function(t,e){return e instanceof ec&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&sc(n,e.filters[i])),!0)}(t,e):void ko()}function oc(t){return t instanceof tc?function(t){return`${t.field.canonicalString()} ${t.op} ${Va(t.value)}`}(t):t instanceof ec?function(t){return t.op.toString()+" {"+t.getFilters().map(oc).join(" ,")+"}"}(t):"Filter"}class ac extends tc{constructor(t,e,n){super(t,e,n),this.key=ta.fromName(n.referenceValue)}matches(t){const e=ta.comparator(t.key,this.key);return this.matchesComparison(e)}}class cc extends tc{constructor(t,e){super(t,"in",e),this.keys=uc(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class lc extends tc{constructor(t,e){super(t,"not-in",e),this.keys=uc(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function uc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ta.fromName(t.referenceValue)))}class hc extends tc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ja(e)&&Ma(e.arrayValue,this.value)}}class dc extends tc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Ma(this.value.arrayValue,e)}}class fc extends tc{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Ma(this.value.arrayValue,e)}}class pc extends tc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ja(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Ma(this.value.arrayValue,t)))}}class gc{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function mc(t,e=null,n=[],i=[],r=null,s=null,o=null){return new gc(t,e,n,i,r,s,o)}function yc(t){const e=Ro(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>rc(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ua(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Va(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Va(t))).join(",")),e.ce=t}return e.ce}function vc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ja(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sc(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xa(t.startAt,e.startAt)&&Xa(t.endAt,e.endAt)}class wc{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function bc(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ec(t){const e=Ro(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new va(Zo.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Ya(i,n))})),t.has(Zo.keyField().canonicalString())||e.le.push(new Ya(Zo.keyField(),n))}return e.le}function Ic(t){const e=Ro(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return mc(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Ya(t.field,e)}));const n=t.endAt?new Qa(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Qa(t.startAt.position,t.startAt.inclusive):null;return mc(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Ec(t))),e.he}function Tc(t,e,n){return new wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _c(t,e){return vc(Ic(t),Ic(e))&&t.limitType===e.limitType}function Sc(t){return`${yc(Ic(t))}|lt:${t.limitType}`}function Cc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>oc(t))).join(", ")}]`),ua(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Va(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Va(t))).join(",")),`Target(${e})`}(Ic(t))}; limitType=${t.limitType})`}function Ac(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ta.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Ec(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Wa(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Ec(t),e)||t.endAt&&!function(t,e,n){const i=Wa(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Ec(t),e))}(t,e)}function Dc(t,e,n){const i=t.field.isKeyField()?ta.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Pa(i,r):ko()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ko()}}class Nc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){fa(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return pa(this.inner)}size(){return this.innerSize}}const kc=new ga(ta.comparator);function Oc(){return kc}const Rc=new ga(ta.comparator);function Lc(...t){let e=Rc;for(const n of t)e=e.insert(n.key,n);return e}function xc(t){let e=Rc;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Mc(){return Fc()}function Pc(){return Fc()}function Fc(){return new Nc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Vc=new ga(ta.comparator),Uc=new va(ta.comparator);function Bc(...t){let e=Uc;for(const n of t)e=e.add(n);return e}const jc=new va(Go);function $c(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(e)?"-0":e}}function zc(t){return{integerValue:""+t}}function qc(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?zc(e):$c(t,e)}class Hc{constructor(){this._=void 0}}function Gc(t,e,n){return t instanceof Wc?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Aa(e)&&(e=Da(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Xc?Yc(t,e):t instanceof Jc?Zc(t,e):function(t,e){const n=Qc(t,e),i=el(n)+el(t.Ie);return Ba(n)&&Ba(t.Ie)?zc(i):$c(t.serializer,i)}(t,e)}function Kc(t,e,n){return t instanceof Xc?Yc(t,e):t instanceof Jc?Zc(t,e):n}function Qc(t,e){return t instanceof tl?function(t){return Ba(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Wc extends Hc{}class Xc extends Hc{constructor(t){super(),this.elements=t}}function Yc(t,e){const n=nl(e);for(const e of t.elements)n.some((t=>xa(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Jc extends Hc{constructor(t){super(),this.elements=t}}function Zc(t,e){let n=nl(e);for(const e of t.elements)n=n.filter((t=>!xa(t,e)));return{arrayValue:{values:n}}}class tl extends Hc{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function el(t){return Sa(t.integerValue||t.doubleValue)}function nl(t){return ja(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class il{constructor(t,e){this.version=t,this.transformResults=e}}class rl{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new rl}static exists(t){return new rl(void 0,t)}static updateTime(t){return new rl(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sl(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ol{}function al(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new yl(t.key,rl.none()):new dl(t.key,t.data,rl.none());{const n=t.data,i=Ha.empty();let r=new va(Zo.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new fl(t.key,i,new ba(r.toArray()),rl.none())}}function cl(t,e,n){t instanceof dl?function(t,e,n){const i=t.value.clone(),r=gl(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof fl?function(t,e,n){if(!sl(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=gl(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(pl(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,i){return t instanceof dl?function(t,e,n,i){if(!sl(t.precondition,e))return n;const r=t.value.clone(),s=ml(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof fl?function(t,e,n,i){if(!sl(t.precondition,e))return n;const r=ml(t.fieldTransforms,i,e),s=e.data;return s.setAll(pl(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return sl(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function ul(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Qc(i.transform,t||null);null!=r&&(null===n&&(n=Ha.empty()),n.set(i.field,r))}return n||null}function hl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ko(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Xc&&e instanceof Xc||t instanceof Jc&&e instanceof Jc?Ko(t.elements,e.elements,xa):t instanceof tl&&e instanceof tl?xa(t.Ie,e.Ie):t instanceof Wc&&e instanceof Wc}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dl extends ol{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fl extends ol{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function pl(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function gl(t,e,n){const i=new Map;Oo(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Kc(o,a,n[r]))}return i}function ml(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Gc(t,s,e))}return i}class yl extends ol{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vl extends ol{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wl{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&cl(i,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ll(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ll(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Pc();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=al(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Wo.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Bc())}isEqual(t){return this.batchId===t.batchId&&Ko(this.mutations,t.mutations,((t,e)=>hl(t,e)))&&Ko(this.baseMutations,t.baseMutations,((t,e)=>hl(t,e)))}}class bl{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Oo(t.mutations.length===n.length);let i=Vc;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new bl(t,e,n,i)}}class El{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Il,Tl;(Tl=Il||(Il={}))[Tl.OK=0]="OK",Tl[Tl.CANCELLED=1]="CANCELLED",Tl[Tl.UNKNOWN=2]="UNKNOWN",Tl[Tl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tl[Tl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tl[Tl.NOT_FOUND=5]="NOT_FOUND",Tl[Tl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tl[Tl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tl[Tl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tl[Tl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tl[Tl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tl[Tl.ABORTED=10]="ABORTED",Tl[Tl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tl[Tl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tl[Tl.INTERNAL=13]="INTERNAL",Tl[Tl.UNAVAILABLE=14]="UNAVAILABLE",Tl[Tl.DATA_LOSS=15]="DATA_LOSS",new bo([4294967295,4294967295],0);class _l{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cl(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Al(t,e){return Sl(t,e.toTimestamp())}function Dl(t){return Oo(!!t),Wo.fromTimestamp(function(t){const e=_a(t);return new Qo(e.seconds,e.nanos)}(t))}function Nl(t,e){return function(t){return new Yo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function kl(t,e){return Nl(t.databaseId,e.path)}function Ol(t){const e=function(t){const e=Yo.fromString(t);return Oo(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Yo.emptyPath():function(t){return Oo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}function Rl(t,e,n){return{name:kl(t,e),fields:n.value.mapValue.fields}}function Ll(t){let e=Ol(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Oo(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=xl(t);return e instanceof ec&&ic(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Ya(Ml(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ua(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Qa(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Qa(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new wc(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function xl(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ml(t.unaryFilter.field);return tc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ml(t.unaryFilter.field);return tc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ml(t.unaryFilter.field);return tc.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ml(t.unaryFilter.field);return tc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ko()}}(t):void 0!==t.fieldFilter?function(t){return tc.create(Ml(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ko()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return ec.create(t.compositeFilter.filters.map((t=>xl(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ko()}}(t.compositeFilter.op))}(t):ko()}function Ml(t){return Zo.fromServerFormat(t.fieldPath)}function Pl(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Fl{constructor(t){this.ut=t}}function Vl(t){const e=Ll({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Tc(e,e.limit,"L"):e}class Ul{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et(Sa(t.integerValue));else if("doubleValue"in t){const n=Sa(t.doubleValue);isNaN(n)?this.Tt(e,13):(this.Tt(e,15),ha(n)?e.Et(0):e.Et(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Tt(e,20),"string"==typeof n?e.dt(n):(e.dt(`${n.seconds||""}`),e.Et(n.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt(Ca(t.bytesValue)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Tt(e,45),e.Et(n.latitude||0),e.Et(n.longitude||0)}else"mapValue"in t?qa(t)?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):ko()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){const n=t.fields||{};this.Tt(e,55);for(const t of Object.keys(n))this.At(t,e),this.Pt(n[t],e)}yt(t,e){const n=t.values||[];this.Tt(e,50);for(const t of n)this.Pt(t,e)}ft(t,e){this.Tt(e,37),ta.fromName(t).path.forEach((t=>{this.Tt(e,60),this.wt(t,e)}))}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}Ul.St=new Ul;class Bl{constructor(){this.on=new jl}addToCollectionParentIndex(t,e){return this.on.add(e),aa.resolve()}getCollectionParents(t,e){return aa.resolve(this.on.getEntries(e))}addFieldIndex(t,e){return aa.resolve()}deleteFieldIndex(t,e){return aa.resolve()}deleteAllFieldIndexes(t){return aa.resolve()}createTargetIndexes(t,e){return aa.resolve()}getDocumentsMatchingTarget(t,e){return aa.resolve(null)}getIndexType(t,e){return aa.resolve(0)}getFieldIndexes(t,e){return aa.resolve([])}getNextCollectionGroupToUpdate(t){return aa.resolve(null)}getMinOffset(t,e){return aa.resolve(na.min())}getMinOffsetFromCollectionGroup(t,e){return aa.resolve(na.min())}updateCollectionGroup(t,e,n){return aa.resolve()}updateIndexEntries(t,e){return aa.resolve()}}class jl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new va(Yo.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new va(Yo.comparator)).toArray()}}new Uint8Array(0);class $l{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new $l(t,$l.DEFAULT_COLLECTION_PERCENTILE,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$l.DEFAULT_COLLECTION_PERCENTILE=10,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$l.DEFAULT=new $l(41943040,$l.DEFAULT_COLLECTION_PERCENTILE,$l.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$l.DISABLED=new $l(-1,0,0);class zl{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new zl(0)}static Nn(){return new zl(-1)}}class ql{constructor(){this.changes=new Nc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ka.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?aa.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Hl{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Gl{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ll(n.mutation,t,ba.empty(),Qo.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Bc()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Bc()){const i=Mc();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Lc();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Mc();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Bc())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Oc();const s=Fc(),o=Fc();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof fl)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),ll(o.mutation,e,o.mutation.getFieldMask(),Qo.now())):s.set(e.key,ba.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Hl(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Fc();let i=new ga(((t,e)=>t-e)),r=Bc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||ba.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Bc()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Pc();c.forEach((t=>{if(!r.has(t)){const i=al(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return aa.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return ta.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):aa.resolve(Mc());let o=-1,a=r;return s.next((e=>aa.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?aa.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Bc()))).next((t=>({batchId:o,changes:xc(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ta(e)).next((t=>{let e=Lc();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Lc();return this.indexManager.getCollectionParents(t,r).next((o=>aa.forEach(o,(o=>{const a=function(t,e){return new wc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ka.newInvalidDocument(i)))}));let n=Lc();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&ll(s.mutation,i,ba.empty(),Qo.now()),Ac(e,i)&&(n=n.insert(t,i))})),n}))}}class Kl{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,e){return aa.resolve(this.ur.get(e))}saveBundleMetadata(t,e){return this.ur.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Dl(t.createTime)}}(e)),aa.resolve()}getNamedQuery(t,e){return aa.resolve(this.cr.get(e))}saveNamedQuery(t,e){return this.cr.set(e.name,function(t){return{name:t.name,query:Vl(t.bundledQuery),readTime:Dl(t.readTime)}}(e)),aa.resolve()}}class Ql{constructor(){this.overlays=new ga(ta.comparator),this.lr=new Map}getOverlay(t,e){return aa.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Mc();return aa.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.lt(t,e,i)})),aa.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.lr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.lr.delete(n)),aa.resolve()}getOverlaysForCollection(t,e,n){const i=Mc(),r=e.length+1,s=new ta(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return aa.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new ga(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Mc(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Mc(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return aa.resolve(o)}lt(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new El(e,n));let r=this.lr.get(e);void 0===r&&(r=Bc(),this.lr.set(e,r)),this.lr.set(e,r.add(n.key))}}class Wl{constructor(){this.hr=new va(Xl.Pr),this.Ir=new va(Xl.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,e){const n=new Xl(t,e);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.dr(new Xl(t,e))}Ar(t,e){t.forEach((t=>this.removeReference(t,e)))}Rr(t){const e=new ta(new Yo([])),n=new Xl(e,t),i=new Xl(e,t+1),r=[];return this.Ir.forEachInRange([n,i],(t=>{this.dr(t),r.push(t.key)})),r}Vr(){this.hr.forEach((t=>this.dr(t)))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const e=new ta(new Yo([])),n=new Xl(e,t),i=new Xl(e,t+1);let r=Bc();return this.Ir.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Xl(t,0),n=this.hr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Xl{constructor(t,e){this.key=t,this.gr=e}static Pr(t,e){return ta.comparator(t.key,e.key)||Go(t.gr,e.gr)}static Tr(t,e){return Go(t.gr,e.gr)||ta.comparator(t.key,e.key)}}class Yl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.pr=1,this.yr=new va(Xl.Pr)}checkEmpty(t){return aa.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new wl(r,e,n,i);this.mutationQueue.push(s);for(const e of i)this.yr=this.yr.add(new Xl(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return aa.resolve(s)}lookupMutationBatch(t,e){return aa.resolve(this.wr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Sr(n),r=i<0?0:i;return aa.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return aa.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(t){return aa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Xl(e,0),i=new Xl(e,Number.POSITIVE_INFINITY),r=[];return this.yr.forEachInRange([n,i],(t=>{const e=this.wr(t.gr);r.push(e)})),aa.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new va(Go);return e.forEach((t=>{const e=new Xl(t,0),i=new Xl(t,Number.POSITIVE_INFINITY);this.yr.forEachInRange([e,i],(t=>{n=n.add(t.gr)}))})),aa.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;ta.isDocumentKey(r)||(r=r.child(""));const s=new Xl(new ta(r),0);let o=new va(Go);return this.yr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.gr)),!0)}),s),aa.resolve(this.br(o))}br(t){const e=[];return t.forEach((t=>{const n=this.wr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Oo(0===this.Dr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return aa.forEach(e.mutations,(i=>{const r=new Xl(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.yr=n}))}Fn(t){}containsKey(t,e){const n=new Xl(e,0),i=this.yr.firstAfterOrEqual(n);return aa.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,aa.resolve()}Dr(t,e){return this.Sr(t)}Sr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}wr(t){const e=this.Sr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Jl{constructor(t){this.Cr=t,this.docs=new ga(ta.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Cr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return aa.resolve(n?n.document.mutableCopy():Ka.newInvalidDocument(e))}getEntries(t,e){let n=Oc();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ka.newInvalidDocument(t))})),aa.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Oc();const s=e.path,o=new ta(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||ia(ea(o),n)<=0||(i.has(o.key)||Ac(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return aa.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ko()}vr(t,e){return aa.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Zl(this)}getSize(t){return aa.resolve(this.size)}}class Zl extends ql{constructor(t){super(),this._r=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this._r.addEntry(t,i)):this._r.removeEntry(n)})),aa.waitFor(e)}getFromCache(t,e){return this._r.getEntry(t,e)}getAllFromCache(t,e){return this._r.getEntries(t,e)}}class tu{constructor(t){this.persistence=t,this.Fr=new Nc((t=>yc(t)),vc),this.lastRemoteSnapshotVersion=Wo.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Wl,this.targetCount=0,this.Nr=zl.On()}forEachTarget(t,e){return this.Fr.forEach(((t,n)=>e(n))),aa.resolve()}getLastRemoteSnapshotVersion(t){return aa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return aa.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),aa.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Mr&&(this.Mr=e),aa.resolve()}kn(t){this.Fr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Nr=new zl(e),this.highestTargetId=e),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,e){return this.kn(e),this.targetCount+=1,aa.resolve()}updateTargetData(t,e){return this.kn(e),aa.resolve()}removeTargetData(t,e){return this.Fr.delete(e.target),this.Or.Rr(e.targetId),this.targetCount-=1,aa.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Fr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),aa.waitFor(r).next((()=>i))}getTargetCount(t){return aa.resolve(this.targetCount)}getTargetData(t,e){const n=this.Fr.get(e)||null;return aa.resolve(n)}addMatchingKeys(t,e,n){return this.Or.Er(e,n),aa.resolve()}removeMatchingKeys(t,e,n){this.Or.Ar(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),aa.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Or.Rr(e),aa.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Or.mr(e);return aa.resolve(n)}containsKey(t,e){return aa.resolve(this.Or.containsKey(e))}}class eu{constructor(t,e){this.Br={},this.overlays={},this.Lr=new la(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new tu(this),this.indexManager=new Bl,this.remoteDocumentCache=function(t){return new Jl(t)}((t=>this.referenceDelegate.Qr(t))),this.serializer=new Fl(e),this.Kr=new Kl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Ql,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Yl(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,e,n){Co("MemoryPersistence","Starting transaction:",t);const i=new nu(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((t=>this.referenceDelegate.Ur(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Wr(t,e){return aa.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class nu extends sa{constructor(t){super(),this.currentSequenceNumber=t}}class iu{constructor(t){this.persistence=t,this.Gr=new Wl,this.zr=null}static jr(t){return new iu(t)}get Hr(){if(this.zr)return this.zr;throw ko()}addReference(t,e,n){return this.Gr.addReference(n,e),this.Hr.delete(n.toString()),aa.resolve()}removeReference(t,e,n){return this.Gr.removeReference(n,e),this.Hr.add(n.toString()),aa.resolve()}markPotentiallyOrphaned(t,e){return this.Hr.add(e.toString()),aa.resolve()}removeTarget(t,e){this.Gr.Rr(e.targetId).forEach((t=>this.Hr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Hr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}$r(){this.zr=new Set}Ur(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return aa.forEach(this.Hr,(n=>{const i=ta.fromPath(n);return this.Jr(t,i).next((t=>{t||e.removeEntry(i,Wo.min())}))})).next((()=>(this.zr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Jr(t,e).next((t=>{t?this.Hr.delete(e.toString()):this.Hr.add(e.toString())}))}Qr(t){return 0}Jr(t,e){return aa.or([()=>aa.resolve(this.Gr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Wr(t,e)])}}class ru{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.ki=n,this.qi=i}static Qi(t,e){let n=Bc(),i=Bc();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new ru(t,e.fromCache,n,i)}}class su{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ou{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,e){this.Gi=t,this.indexManager=e,this.Ki=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.zi(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.ji(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new su;return this.Hi(t,e,n).next((i=>{if(r.result=i,this.$i)return this.Ji(t,e,n,i.size)}))})).next((()=>r.result))}Ji(t,e,n,i){return n.documentReadCount<this.Ui?(So()<=C.DEBUG&&Co("QueryEngine","SDK will not create cache indexes for query:",Cc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),aa.resolve()):(So()<=C.DEBUG&&Co("QueryEngine","Query:",Cc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(So()<=C.DEBUG&&Co("QueryEngine","The SDK decides to create cache indexes for query:",Cc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ic(e))):aa.resolve())}zi(t,e){if(bc(e))return aa.resolve(null);let n=Ic(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Tc(e,null,"F"),n=Ic(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Bc(...i);return this.Gi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Yi(e,i);return this.Zi(e,s,r,n.readTime)?this.zi(t,Tc(e,null,"F")):this.Xi(t,s,e,n)}))))})))))}ji(t,e,n,i){return bc(e)||i.isEqual(Wo.min())?aa.resolve(null):this.Gi.getDocuments(t,n).next((r=>{const s=this.Yi(e,r);return this.Zi(e,s,n,i)?aa.resolve(null):(So()<=C.DEBUG&&Co("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cc(e)),this.Xi(t,s,e,function(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Wo.fromTimestamp(1e9===i?new Qo(n+1,0):new Qo(n,i));return new na(r,ta.empty(),e)}(i,-1)).next((t=>t)))}))}Yi(t,e){let n=new va(function(t){return(e,n)=>{let i=!1;for(const r of Ec(t)){const t=Dc(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{Ac(t,i)&&(n=n.add(i))})),n}Zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Hi(t,e,n){return So()<=C.DEBUG&&Co("QueryEngine","Using full collection scan to execute query:",Cc(e)),this.Gi.getDocumentsMatchingQuery(t,e,na.min(),n)}Xi(t,e,n,i){return this.Gi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class au{constructor(t,e,n,i){this.persistence=t,this.es=e,this.serializer=i,this.ts=new ga(Go),this.ns=new Nc((t=>yc(t)),vc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(n)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gl(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ts)))}}async function cu(t,e){const n=Ro(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.os(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Bc();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({_s:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function lu(t,e){const n=Ro(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class uu{constructor(){this.activeTargetIds=jc}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hu{constructor(){this.eo=new uu,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,e,n){this.no[t]=e}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new uu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class du{ro(t){}shutdown(){}}class fu{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Co("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Co("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pu=null;function gu(){return null===pu?pu=268435456+Math.round(2147483648*Math.random()):pu++,"0x"+pu.toString(16)}const mu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yu{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}const vu="WebChannelConnection";class wu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=e+"://"+t.host,this.fo=`projects/${n}/databases/${i}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get yo(){return!1}wo(t,e,n,i,r){const s=gu(),o=this.So(t,e);Co("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,i,r),this.Do(t,o,a,n).then((e=>(Co("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Do("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,r,s){return this.wo(t,e,n,i,r)}bo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+To,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}So(t,e){const n=mu[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,e,n,i){const r=gu();return new Promise(((s,o)=>{const a=new wo;a.setWithCredentials(!0),a.listenOnce(go.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case po.NO_ERROR:const e=a.getResponseJson();Co(vu,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case po.TIMEOUT:Co(vu,`RPC '${t}' ${r} timed out`),o(new xo(Lo.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:const n=a.getStatus();if(Co(vu,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Lo).indexOf(e)>=0?e:Lo.UNKNOWN}(e.status);o(new xo(t,e.message))}else o(new xo(Lo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new xo(Lo.UNAVAILABLE,"Connection failed."));break;default:ko()}}finally{Co(vu,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);Co(vu,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}vo(t,e,n){const i=gu(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ho(),o=fo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");Co(vu,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new yu({co:e=>{d?Co(vu,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Co(vu,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),Co(vu,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},lo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,vo.EventType.OPEN,(()=>{d||Co(vu,`RPC '${t}' stream ${i} transport opened.`)})),p(u,vo.EventType.CLOSE,(()=>{d||(d=!0,Co(vu,`RPC '${t}' stream ${i} transport closed`),f.Ro())})),p(u,vo.EventType.ERROR,(e=>{d||(d=!0,Do(vu,`RPC '${t}' stream ${i} transport errored:`,e),f.Ro(new xo(Lo.UNAVAILABLE,"The operation could not be completed")))})),p(u,vo.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Oo(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Co(vu,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Il[t];if(void 0!==e)return function(t){if(void 0===t)return Ao("GRPC error has no .code"),Lo.UNKNOWN;switch(t){case Il.OK:return Lo.OK;case Il.CANCELLED:return Lo.CANCELLED;case Il.UNKNOWN:return Lo.UNKNOWN;case Il.DEADLINE_EXCEEDED:return Lo.DEADLINE_EXCEEDED;case Il.RESOURCE_EXHAUSTED:return Lo.RESOURCE_EXHAUSTED;case Il.INTERNAL:return Lo.INTERNAL;case Il.UNAVAILABLE:return Lo.UNAVAILABLE;case Il.UNAUTHENTICATED:return Lo.UNAUTHENTICATED;case Il.INVALID_ARGUMENT:return Lo.INVALID_ARGUMENT;case Il.NOT_FOUND:return Lo.NOT_FOUND;case Il.ALREADY_EXISTS:return Lo.ALREADY_EXISTS;case Il.PERMISSION_DENIED:return Lo.PERMISSION_DENIED;case Il.FAILED_PRECONDITION:return Lo.FAILED_PRECONDITION;case Il.ABORTED:return Lo.ABORTED;case Il.OUT_OF_RANGE:return Lo.OUT_OF_RANGE;case Il.UNIMPLEMENTED:return Lo.UNIMPLEMENTED;case Il.DATA_LOSS:return Lo.DATA_LOSS;default:return ko()}}(e)}(e),r=o.message;void 0===n&&(n=Lo.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ro(new xo(n,r)),u.close()}else Co(vu,`RPC '${t}' stream ${i} received:`,r),f.Vo(r)}})),p(o,mo.STAT_EVENT,(e=>{e.stat===yo.PROXY?Co(vu,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===yo.NOPROXY&&Co(vu,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ao()}),0),f}}function bu(){return"undefined"!=typeof document?document:null}function Eu(t){return new _l(t,!0)}class Iu{constructor(t,e,n=1e3,i=1.5,r=6e4){this.si=t,this.timerId=e,this.Fo=n,this.Mo=i,this.xo=r,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const e=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,e-n);i>0&&Co("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),t()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Tu{constructor(t,e,n,i,r,s,o,a){this.si=t,this.Ko=n,this.$o=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Iu(t,e)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,e){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():e&&e.code===Lo.RESOURCE_EXHAUSTED?(Ao(e.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):e&&e.code===Lo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(e)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),e=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Uo===e&&this.s_(t,n)}),(e=>{t((()=>{const t=new xo(Lo.UNKNOWN,"Fetching auth token failed: "+e.message);return this.o_(t)}))}))}s_(t,e){const n=this.i_(this.Uo);this.stream=this.__(t,e),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((t=>{n((()=>this.o_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(t){return Co("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return e=>{this.si.enqueueAndForget((()=>this.Uo===t?e():(Co("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _u extends Tu{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,e){return this.connection.vo("Write",t,e)}onMessage(t){if(Oo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const e=function(t,e){return t&&t.length>0?(Oo(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Dl(t.updateTime):Dl(e);return n.isEqual(Wo.min())&&(n=Dl(e)),new il(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Dl(t.commitTime);return this.listener.I_(n,e)}return Oo(!t.writeResults||0===t.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=function(t){return new Yo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.e_(t)}P_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof dl)n={update:Rl(t,e.key,e.value)};else if(e instanceof yl)n={delete:kl(t,e.key)};else if(e instanceof fl)n={update:Rl(t,e.key,e.data),updateMask:Pl(e.fieldMask)};else{if(!(e instanceof vl))return ko();n={verify:kl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Wc)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Xc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tl)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw ko()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Al(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ko()}(t,e.precondition)),n}(this.serializer,t)))};this.e_(e)}}class Su extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new xo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,e,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.wo(t,e,n,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Lo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new xo(Lo.UNKNOWN,t.toString())}))}Co(t,e,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Co(t,e,n,r,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Lo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new xo(Lo.UNKNOWN,t.toString())}))}terminate(){this.d_=!0}}class Cu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(t){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,"Online"===t&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Ao(e),this.f_=!1):Co("OnlineStateTracker",e)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Au{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=r,this.F_.ro((t=>{n.enqueueAndForget((async()=>{ku(this)&&(Co("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ro(t);e.C_.add(4),await Nu(e),e.M_.set("Unknown"),e.C_.delete(4),await Du(e)}(this))}))})),this.M_=new Cu(n,i)}}async function Du(t){if(ku(t))for(const e of t.v_)await e(!0)}async function Nu(t){for(const e of t.v_)await e(!1)}function ku(t){return 0===Ro(t).C_.size}async function Ou(t,e,n){if(!ca(e))throw e;t.C_.add(1),await Nu(t),t.M_.set("Offline"),n||(n=()=>function(t){const e=Ro(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.qr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Co("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await Du(t)}))}function Ru(t,e){return e().catch((n=>Ou(t,n,e)))}async function Lu(t){const e=Ro(t),n=zu(e);let i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;xu(e);)try{const t=await lu(e.localStore,i);if(null===t){0===e.b_.length&&n.Zo();break}i=t.batchId,Mu(e,t)}catch(t){await Ou(e,t)}Pu(e)&&Fu(e)}function xu(t){return ku(t)&&t.b_.length<10}function Mu(t,e){t.b_.push(e);const n=zu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function Pu(t){return ku(t)&&!zu(t).jo()&&t.b_.length>0}function Fu(t){zu(t).start()}async function Vu(t){zu(t).E_()}async function Uu(t){const e=zu(t);for(const n of t.b_)e.P_(n.mutations)}async function Bu(t,e,n){const i=t.b_.shift(),r=bl.from(i,e,n);await Ru(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Lu(t)}async function ju(t,e){e&&zu(t).h_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return ko();case Lo.CANCELLED:case Lo.UNKNOWN:case Lo.DEADLINE_EXCEEDED:case Lo.RESOURCE_EXHAUSTED:case Lo.INTERNAL:case Lo.UNAVAILABLE:case Lo.UNAUTHENTICATED:return!1;case Lo.INVALID_ARGUMENT:case Lo.NOT_FOUND:case Lo.ALREADY_EXISTS:case Lo.PERMISSION_DENIED:case Lo.FAILED_PRECONDITION:case Lo.ABORTED:case Lo.OUT_OF_RANGE:case Lo.UNIMPLEMENTED:case Lo.DATA_LOSS:return!0}}(t)&&t!==Lo.ABORTED}(e.code)){const n=t.b_.shift();zu(t).Yo(),await Ru(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Lu(t)}}(t,e),Pu(t)&&Fu(t)}async function $u(t,e){const n=Ro(t);n.asyncQueue.verifyOperationInProgress(),Co("RemoteStore","RemoteStore received new credentials");const i=ku(n);n.C_.add(3),await Nu(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await Du(n)}function zu(t){return t.N_||(t.N_=function(t,e,n){const i=Ro(t);return i.A_(),new _u(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{ho:Vu.bind(null,t),Io:ju.bind(null,t),T_:Uu.bind(null,t),I_:Bu.bind(null,t)}),t.v_.push((async e=>{e?(t.N_.Yo(),await Lu(t)):(await t.N_.stop(),t.b_.length>0&&(Co("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}class qu{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new qu(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xo(Lo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hu(t,e){if(Ao("AsyncQueue",`${e}: ${t}`),ca(t))return new xo(Lo.UNAVAILABLE,`${e}: ${t}`);throw t}class Gu{constructor(){this.queries=new Nc((t=>Sc(t)),_c),this.onlineState="Unknown",this.q_=new Set}}class Ku{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Nc((t=>Sc(t)),_c),this.fa=new Map,this.ga=new Set,this.pa=new ga(ta.comparator),this.ya=new Map,this.wa=new Wl,this.Sa={},this.ba=new Map,this.Da=zl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Qu(t,e,n){const i=Ro(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ma.forEach(((n,i)=>{const r=i.view.Q_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Ro(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Q_(e)&&(i=!0)})),i&&function(t){t.q_.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.Va.a_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Wu(t,e){const n=Ro(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Ro(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ss.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=aa.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Oo(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Bc();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);Ju(n,i,null),Yu(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zu(n,t)}catch(t){await oa(t)}}async function Xu(t,e,n){const i=Ro(t);try{const t=await function(t,e){const n=Ro(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Oo(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);Ju(i,e,n),Yu(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zu(i,t)}catch(n){await oa(n)}}function Yu(t,e){(t.ba.get(e)||[]).forEach((t=>{t.resolve()})),t.ba.delete(e)}function Ju(t,e,n){const i=Ro(t);let r=i.Sa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}async function Zu(t,e,n){const i=Ro(t),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach(((t,a)=>{o.push(i.va(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=ru.Qi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.Va.a_(r),await async function(t,e){const n=Ro(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>aa.forEach(e,(e=>aa.forEach(e.ki,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>aa.forEach(e.qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!ca(t))throw t;Co("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ts.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ts=n.ts.insert(e,r)}}}(i.localStore,s))}async function th(t,e){const n=Ro(t);if(!n.currentUser.isEqual(e)){Co("SyncEngine","User change. New user:",e.toKey());const t=await cu(n.localStore,e);n.currentUser=e,function(t,e){t.ba.forEach((t=>{t.forEach((t=>{t.reject(new xo(Lo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ba.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Zu(n,t._s)}}function eh(t){const e=Ro(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xu.bind(null,e),e}class nh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Eu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,i){return new au(t,e,n,i)}(this.persistence,new ou,t.initialUser,this.serializer)}createPersistence(t){return new eu(iu.jr,this.serializer)}createSharedClientState(t){return new hu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ih{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Qu(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=th.bind(null,this.syncEngine),await async function(t,e){const n=Ro(t);e?(n.C_.delete(2),await Du(n)):e||(n.C_.add(2),await Nu(n),n.M_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Gu}createDatastore(t){const e=Eu(t.databaseInfo.databaseId),n=function(t){return new wu(t)}(t.databaseInfo);return function(t,e,n,i){return new Su(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new Au(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>Qu(this.syncEngine,t,0)),fu.D()?new fu:new du)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Ku(t,e,n,i,r,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ro(t);Co("RemoteStore","RemoteStore shutting down."),e.C_.add(5),await Nu(e),e.F_.shutdown(),e.M_.set("Unknown")}(this.remoteStore)}}class rh{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Io.UNAUTHENTICATED,this.clientId=Ho.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Co("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Co("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Hu(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function sh(t,e){t.asyncQueue.verifyOperationInProgress(),Co("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await cu(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function oh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Co("FirestoreClient","Using user provided OfflineComponentProvider");try{await sh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Lo.FAILED_PRECONDITION||t.code===Lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await sh(t,new nh)}}else Co("FirestoreClient","Using default OfflineComponentProvider"),await sh(t,new nh);return t._offlineComponents}(t);Co("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>$u(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>$u(e.remoteStore,n))),t._onlineComponents=e}function ah(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Co("FirestoreClient","Using user provided OnlineComponentProvider"),await oh(t,t._uninitializedComponentsProvider._online)):(Co("FirestoreClient","Using default OnlineComponentProvider"),await oh(t,new ih))),t._onlineComponents}(t).then((t=>t.syncEngine))}function ch(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const lh=new Map;function uh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ko()}function hh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xo(Lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uh(t);throw new xo(Lo.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class dh{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new xo(Lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xo(Lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new xo(Lo.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ch(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new xo(Lo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new xo(Lo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new xo(Lo.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fh{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xo(Lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new xo(Lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dh(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Fo;switch(t.type){case"firstParty":return new jo(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xo(Lo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=lh.get(t);e&&(Co("ComponentProvider","Removing Datastore"),lh.delete(t),e.terminate())}(this),Promise.resolve()}}class ph{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ph(this.firestore,t,this._query)}}class gh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gh(this.firestore,t,this._key)}}class mh extends ph{constructor(t,e,n){super(t,e,function(t){return new wc(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gh(this.firestore,null,new ta(t))}withConverter(t){return new mh(this.firestore,t,this._path)}}class yh{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Iu(this,"async_queue_retry"),this.iu=()=>{const t=bu();t&&Co("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const t=bu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const e=bu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise((()=>{}));const e=new Mo;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ya.push(t),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!ca(t))throw t;Co("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(t){const e=this.Ja.then((()=>(this.tu=!0,t().catch((t=>{this.eu=t,this.tu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ao("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.tu=!1,t))))));return this.Ja=e,e}enqueueAfterDelay(t,e,n){this.su(),this.ru.indexOf(t)>-1&&(e=0);const i=qu.createAndSchedule(this,t,e,n,(t=>this.au(t)));return this.Xa.push(i),i}su(){this.eu&&ko()}verifyOperationInProgress(){}async uu(){let t;do{t=this.Ja,await t}while(t!==this.Ja)}cu(t){for(const e of this.Xa)if(e.timerId===t)return!0;return!1}lu(t){return this.uu().then((()=>{this.Xa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Xa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.uu()}))}hu(t){this.ru.push(t)}au(t){const e=this.Xa.indexOf(t);this.Xa.splice(e,1)}}class vh extends fh{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new yh,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wh(this),this._firestoreClient.terminate()}}function wh(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new ka(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ch(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new rh(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class bh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bh(Ia.fromBase64String(t))}catch(t){throw new xo(Lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new bh(Ia.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Eh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new xo(Lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ih{constructor(t){this._methodName=t}}class Th{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new xo(Lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xo(Lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Go(this._lat,t._lat)||Go(this._long,t._long)}}const _h=/^__.*__$/;class Sh{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new fl(t,this.data,this.fieldMask,e,this.fieldTransforms):new dl(t,this.data,e,this.fieldTransforms)}}function Ch(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ko()}}class Ah{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Pu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Ah(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Au(t),i}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Fh(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(0===t.length)throw this.mu("Document fields must not be empty");if(Ch(this.Iu)&&_h.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class Dh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Eu(t)}pu(t,e,n,i=!1){return new Ah({Iu:t,methodName:e,gu:n,path:Zo.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(t){const e=t._freezeSettings(),n=Eu(t._databaseId);return new Dh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kh(t,e,n,i,r,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,r);xh("Data must be an object, but it was:",o,i);const a=Rh(i,o);let c,l;if(s.merge)c=new ba(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Mh(e,i,n);if(!o.contains(r))throw new xo(Lo.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Vh(t,r)||t.push(r)}c=new ba(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Sh(new Ha(a),c,l)}function Oh(t,e){if(Lh(t=b(t)))return xh("Unsupported field value:",e,t),Rh(t,e);if(t instanceof Ih)return function(t,e){if(!Ch(e.Iu))throw e.mu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.mu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Oh(r,e.Vu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=b(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qc(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Qo.fromDate(t);return{timestampValue:Sl(e.serializer,n)}}if(t instanceof Qo){const n=new Qo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(e.serializer,n)}}if(t instanceof Th)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bh)return{bytesValue:Cl(e.serializer,t._byteString)};if(t instanceof gh){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.mu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Nl(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.mu(`Unsupported field value: ${uh(t)}`)}(t,e)}function Rh(t,e){const n={};return pa(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(t,((t,i)=>{const r=Oh(i,e.Eu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Lh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qo||t instanceof Th||t instanceof bh||t instanceof gh||t instanceof Ih)}function xh(t,e,n){if(!Lh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=uh(n);throw"an object"===i?e.mu(t+" a custom object"):e.mu(t+" "+i)}}function Mh(t,e,n){if((e=b(e))instanceof Eh)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(Ph)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Eh(...e.split("."))._internalPath}catch(i){throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw Fh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ph=new RegExp("[~\\*/\\[\\]]");function Fh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new xo(Lo.INVALID_ARGUMENT,a+t+c)}function Vh(t,e){return t.some((t=>t.isEqual(e)))}function Uh(t,e){return function(t,e){const n=new Mo;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=eh(t);try{const t=await function(t,e){const n=Ro(t),i=Qo.now(),r=e.reduce(((t,e)=>t.add(e.key)),Bc());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Oc(),c=Bc();return n.ss.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=ul(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new fl(t.key,e,Ga(e.value.mapValue),rl.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:xc(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Sa[t.currentUser.toKey()];i||(i=new ga(Go)),i=i.insert(e,n),t.Sa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Zu(i,t.changes),await Lu(i.remoteStore)}catch(t){const e=Hu(t,"Failed to persist write");n.reject(e)}}(await ah(t),e,n))),n.promise}(function(t){return t._firestoreClient||wh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(t),e)}new WeakMap,function(t,e=!0){To="10.7.1",st(new E("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new vh(new Uo(t.getProvider("auth-internal")),new zo(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xo(Lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),ht(Eo,"4.4.0",t),ht(Eo,"4.4.0","esm2017")}(),function(t=ut()){const e=ot(t=b(t),Ce);e.isInitialized()?e.getImmediate():function(t,e={}){const n=ot(t,Ce);if(n.isInitialized()){const t=n.getImmediate();if(f(e,n.getOptions()))return t;throw Le.create("already-initialized")}n.initialize({options:e})}(t)}(lt({apiKey:"AIzaSyCWGyp8RLsL8GuCUDIFa0edgeQud8jyuPs",authDomain:"frontend-vuejs-assignmen-ab925.firebaseapp.com",projectId:"frontend-vuejs-assignmen-ab925",storageBucket:"frontend-vuejs-assignmen-ab925.appspot.com",messagingSenderId:"480810690536",appId:"1:480810690536:web:8c8db6b550b16241a8265d",measurementId:"G-0EMBL2W4GL"}));const Bh=function(t,e){const n=ot(ut(),"firestore").getImmediate({identifier:"(default)"});if(!n._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&function(t,e,n,i={}){var s;const o=(t=hh(t,fh))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Io.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[r(JSON.stringify({alg:"none",type:"JWT"})),r(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new xo(Lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Io(o)}t._authCredentials=new Vo(new Po(e,n))}}(n,...t)}return n}();doc(Bh,"dataSample/patientData"),function(t,e,n){t=hh(t,gh);const i=hh(t.firestore,vh),r=function(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}(t.converter,{name:"Adedokun Silas",age:"24",bloodGroup:"A"},n);Uh(i,[kh(Nh(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,rl.none())])}(dataSample),console.log("Let's get this party started")})();